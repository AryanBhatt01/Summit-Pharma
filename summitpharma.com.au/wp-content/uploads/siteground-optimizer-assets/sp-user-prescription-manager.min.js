(function(a) {
    const b = {
        totalPrice: 0,
        starterKitData: [],
        init: function() {
            this.onStarterKitQuantityChange(), this.proceedToCheckout()
        },
        onStarterKitQuantityChange: function(c) {
            a('.sp-sk-quantity-js').on('change', function() {
                b.computeTotal()
            })
        },
        computeTotal: function() {
            let c = 0;
            b.starterKitData = [], a('.sp-sk-quantity-js').each(function() {
                const d = parseInt(a(this).val());
                if (d) {
                    const e = a(this).parents('.nrt-product-cusstomization-wrapper'),
                        f = a(this).parents('.product-custom-item').data().productId,
                        g = parseFloat(e.data().price),
                        h = g * d;
                    b.starterKitData.push({
                        product_id: f,
                        quantity: d
                    }), c += h
                }
            }), b.totalPrice = c, a('#starter-kit-total-price .elementor-heading-title').text(`Total: $${b.totalPrice.toFixed(2)}`)
        },
        proceedToCheckout: function() {
            a('#starter-kit-checkout').on('click', function(c) {
                if (c.preventDefault(), c.stopPropagation(), !b.validateStarterKit()) return;
                let d = a('.elementor-button-text', this).text();
                const e = a('.starter-kit-items').data().productCategoryId,
                    f = {
                        action: sp_upm_ajax_public.starter_kit_action,
                        ajax_nonce: sp_upm_ajax_public.ajax_nonce,
                        data: b.starterKitData,
                        product_category_id: e
                    };
                a.ajax({
                    type: 'post',
                    url: sp_upm_ajax_public.admin_url,
                    dataType: 'json',
                    data: f,
                    beforeSend: function(b) {
                        a('.sp-upm-loading-indicator').addClass('is-active'), a('#starter-kit-checkout').addClass('disabled'), a('#starter-kit-checkout').find('.elementor-button-text').text('Processing...')
                    },
                    success: function(a) {
                        a.success && (window.location.href = a.data.redirect_url)
                    },
                    error: function(a) {
                        alert(a.message)
                    },
                    complete: function() {
                        a('#starter-kit-checkout .elementor-button-text').text(d).removeAttr('disabled')
                    }
                })
            })
        },
        validateStarterKit: function() {
            return !(b.computeTotal(), b.totalPrice == 0) || (alert('Select at least 1 device or 1 pod flavor'), !1)
        },
        validatePanelQuantity: function() {
            const b = a('.starter-kit-items > div');
            let c = 0;
            return b.each(function(e, d) {
                let b = !1;
                a('.sp-sk-quantity-js', d).each(function(c, a) {
                    b = !!parseInt(a.value) || b
                }), b && c++
            }), c === b.length
        }
    };
    a(document).ready(function() {
        b.init()
    })
})(jQuery)