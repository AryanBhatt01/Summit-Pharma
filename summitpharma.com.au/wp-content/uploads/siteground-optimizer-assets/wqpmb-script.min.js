jQuery(function(a) {
    a(document).ready(function() {
        b()
    }), a(document).ajaxComplete(function() {
        b()
    }), a(document.body).on('change', 'ul.products input.input-text.qty.text', function() {
        var b = a(this).val();
        typeof b != 'undefined' && a(this).closest('li.product').find('a.button').attr('data-quantity', b)
    });

    function b() {
        a(document).off("click", ".qib-button").on("click", ".qib-button", function() {
            var b = a(this).siblings(".quantity").find(".input-text"),
                c = parseFloat(b.val()),
                e = parseFloat(b.attr("max")),
                g = parseFloat(b.attr("min")),
                f = parseFloat(b.attr("step")),
                d = a(this).siblings(".quantity"),
                h = d.attr('data-last_step'),
                i;
            if (h = parseFloat(h), i = d.attr('data-prev_step'), i = parseFloat(i), a(this).is(".plus")) {
                if (c === e) return !1;
                if (isNaN(c)) return b.val(f), !1;
                c + f > e ? (d.attr('data-last_step', e - c < 0 ? 1 : e - c), d.attr('data-prev_step', f), d.find(".input-text").removeAttr('step'), b.val(e)) : b.val(c + f)
            } else {
                if (h) return b.val(e - h), d.removeAttr('data-last_step'), d.find(".input-text").attr('step', i), d.removeAttr('data-prev_step'), !1;
                if (c === g) return !1;
                if (isNaN(c)) return b.val(g), !1;
                c - f < g ? b.val(g) : b.val(c - f)
            }
            b.val(Math.round(b.val() * 1e5) / 1e5), b.trigger('change'), setTimeout(function() {
                a('button.button[name=update_cart]').trigger('click')
            }, 800), a("body").removeClass("sf-input-focused")
        })
    }
})